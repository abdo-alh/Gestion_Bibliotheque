{% extends 'base.html.twig' %}

{% block title %}Book-detail{% endblock %}

{% block body %}

  <!--START BOOK-PAGE-BACKGROUND SECTION-->
    <div class="book-page-background pages-background">
      <h1>Our Book</h1>
    </div>
    <!--END BOOK-PAGE-BACKGROUND SECTION-->
    <!-- Start Tool Box SECTION-->
        <div class="option-box">
            <div class="color-option">
                <h2>Color Selector</h2>
                <ul class="list-unstyled">
                    <li data-value="{{ asset('assets/css/default_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/emerald_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/turquoise_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/sunflower_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/orange_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/carrot_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/alizarin_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/concrete_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/amethyst_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/wetasphalt_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/sienna_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/hotpink_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/darkgoldenrod_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/lightskyblue_theme.css')}}"></li>
                    <li data-value="{{ asset('assets/css/black_theme.css')}}"></li>
                </ul>
            </div>
            <i class="fa fa-gear fa-2x gear-check"></i>
        </div>
        <!-- End Tool Box SECTION -->
    <!--START BOOK-CONTENT SECTION-->
    <div class="book-content parts wrapper">
      <div class="container">
        <div class="book-content-head">
          <h2 class="main-color">Book Details</h2><br>
          <span class="first-line"></span>
        </div>  
        <div class="row book-content-body">
          <div class="col-md-4">
            <div class="book-img">
              <img src="{{ asset('img/books/' ~ book.image)  }}" alt="SOME THINGS TAKE TIME">
            </div>
          </div>
          <div class="col-md-8">
            <div class="book-details">
            <h6 style="color: gray;font-size: 30px;position: relative;left: 9px">{{book.name}}</h6>
              <div class="book-tags book-tag-blacky">Author: 
                <a href="author-profile.html" class="book-tag book-tag-blacky">{{book.auteur.name}}</a>.
              </div>
              <div class="book-tags book-tag-blacky">Format: PDF
              </div>
              <div class="book-tags book-tag-blacky">Categories: {{book.categorie.name}}
              </div><br>
                <a href="{{ path('book_like', {'id':book.id})}}" class="btn btn-link js-like book-price">
                            {% if app.user and book.isLikeByUser(app.user) %}
                                <i class="fas fa-thumbs-up"></i>
                            {% else %}
                                <i class="far fa-thumbs-up"></i>
                            {% endif %}
                            <span class="js-likes">{{ book.likes | length }}</span>
                            <span class="js-label">J'aime</span>
                        </a>
            
              
                
              <ul class="nav nav-tabs">
                  <li class="active"><a data-toggle="tab" href="tryit.asp@filename=trybs_tabs_dynamic&stacked=h.html#home">About this book</a></li>
                  <li><a data-toggle="tab" href="tryit.asp@filename=trybs_tabs_dynamic&stacked=h.html#menu3">Reviews</a></li>
                  <li><a data-toggle="tab" href="tryit.asp@filename=trybs_tabs_dynamic&stacked=h.html#menu1">Show & Downoald</a></li>
              </ul>
              <div class="tab-content">
                <!--START ABOUT THIS  BOOK-->
                  <div id="home" class="tab-pane tab-pane-about-this-books fade in active">
                      <p>{{book.description}}</p>
                      <a class="more">read more<i class="fa fa-angle-down" aria-hidden="true"></i></a>
                  </div>
                  <!--END ABOUT THIS  BOOK-->
                     <!--START SOFTCOVER DETAILS-->
                  <div id="menu1" class="tab-pane tab-pane-softcover-details fade">
                    <div class="row">
                      {%if app.user%}
                      <dl style="position:relative;top: 10px;" class="col-md-6">
                        <dt>Show & downoald the book: <b style="color:red">{{book.name}}</b> from Here:</dt>
                        
                      </dl>
                      <dl class="col-md-4">
                        <dt>  <div class="softcover-details-btn">
                    <a href="{{ asset('pdf/' ~ book.pdf)  }}" target="_blank" class="btn btn-lg softcover-book-btn" href="cart.html">Show & Downoald <i class="fa fa-angle-right"></i></a>
                  </div></dt>
                      </dl>

                      {%else%}
                      <dl style="position:relative;top: 10px;" class="col-md-6">
                        <dt>You can't downoald this book please <a href="{{path('inscription')}}" target="_blank">Register Here</a></dt>
                        
                      </dl>
                      <dl class="col-md-4">
                        <dt>  <div class="softcover-details-btn">
                    <a href="{{ asset('pdf/' ~ book.pdf)  }}" target="_blank"  ><button disabled="" class="btn btn-lg softcover-book-btn" > Show & Downoald </button></a>
                  </div></dt>
                      </dl>
                      <script type="text/javascript">
                        
                      </script>
                      {%endif%}
                      <dl class="col-md-2"></dl>
                    </div>
                  
                  </div>
                  <!--END SOFTCOVER DETAILS-->
                  <!--START PERSON REVIEWS -->
                  <div id="menu3" class="tab-pane tab-pane-reviews fade">
                  
                 
                  
                    {% for commentaire in book.commentaires %}
                  <!--START PERSON REVIEW -->
                  <div class="person-comment">
                   
                    <div class="comment-pic">
                      <a>
                        <img src="{{ asset('img/users/' ~ commentaire.user.image)  }}">
                      </a>
                    </div>
                    <div class="comment-body">
                      <h4 class="comment-writer">
                        <a>{{commentaire.user.username}}</a>
                      </h4>
                  
                      <pr style="color:gray">{{commentaire.description |raw}}</pr>
                      <div class="comment-info">
                        <a class="comment-time post-capitalize"> {{commentaire.createdAt | date('d/m/y a H:i')}}</a>
                      </div>
                    </div>
                
                  </div>
                      {% endfor %}
                  <!--END PERSON REVIEW -->
                  <!--START POST REVIEW -->
                  <div class="post-review">
                    <div class="subheading">
                      <h3 class="post-capitalize">post a review</h3>
                      <span></span>
                    </div>
                    {%if app.user%}
                    <div class="user-details">
                      <form action="{{path('comment', {'id':book.id})}}" method="post">
                                      <div class="form-group">
                                          <h5>Review :</h5>
                                          <textarea class="form-control " name="description" placeholder="Your Review"></textarea>
                                      </div>
                             
                                    <button class="btn btn-block btn-lg book-reviews-btn post-capitalize" type="submit">submit a review</button>
                                </form>
                              </div>
                          {%else%}
                          <h2 style="color:gray">please sign in to comment</h2>
                          {%endif%}
                  </div>


                  <!--START POST REVIEW -->
                  </div>
                  <!--END PERSON REVIEWS -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
   

{% endblock %}

{% block javascripts %}
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
 <script src="{{ asset('js/like.js') }}"></script>
{% endblock %}